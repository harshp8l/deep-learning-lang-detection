SELECT (
        SELECT p.PRODUCT_ID AS [HEADER_TEST_PRDUCT/PRODUCT_ID]
              ,p.PRODUCT_NAME AS [HEADER_TEST_PRDUCT/PRODUCT_NAME]
        FOR XML PATH('ROOT'),TYPE
       ) AS [FILE]
      ,'' --neede to separate `<FILE>` nodes
      ,(
        SELECT v.ID AS [HEADER_TEST_PROD_VALUES/ID]
              ,v.PRODUCT_ID AS [HEADER_TEST_PROD_VALUES/PRODUCT_ID]
              ,v.PROD_VALUES_VALUE AS [HEADER_TEST_PROD_VALUES/PROD_VALUES_VALUE]
        FROM  @TEST_PROD_VALUES AS v
        WHERE v.PRODUCT_ID=p.PRODUCT_ID
        FOR XML PATH('LIST_DETAILS_PROD_VALUES'),ROOT('ROOT'),TYPE
       ) AS [FILE]
      ,'' --neede to separate `<FILE>` nodes
      ,(
        SELECT vd.ID AS [HEADER_TEST_VENDOR/ID]
              ,vd.PRODUCT_ID AS [HEADER_TEST_VENDOR/PRODUCT_ID]
              ,vd.VENDOR_NAME AS [HEADER_TEST_VENDOR/VENDOR_NAME]
        FROM  @TEST_VENDOR AS vd
        WHERE vd.PRODUCT_ID=p.PRODUCT_ID
        FOR XML PATH('LIST_DETAILS_VENDOR'),ROOT('ROOT'),TYPE
       ) AS [FILE]
FROM  @TEST_PRODUCT AS p
FOR XML PATH('LIST');
