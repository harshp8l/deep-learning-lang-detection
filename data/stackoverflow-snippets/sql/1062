SELECT nazev, vydani, delka, cena
     , LISTAGG(jmeno, ',') WITHIN GROUP (ORDER BY jmeno) AS Produkce
  FROM (
    SELECT DISTINCT FILM.NAZEV, FILM.VYDANI, FILM.DELKA, FILM.CENA, OSOBA.JMENO
      FROM FILM_PRODEJNA INNER JOIN FILM
        ON FILM_PRODEJNA.FILM_ID_FILM = FILM.ID_FILM
      LEFT JOIN FILM_PRODUKCE ON FILM_PRODUKCE.FILM_ID_FILM = FILM.ID_FILM
      LEFT JOIN PRODUKCE ON PRODUKCE.ID_PRODUKCE = FILM_PRODUKCE.ID_FILM_PRODUKCE
      LEFT JOIN ZASTOUPENI ON ZASTOUPENI.ID_ZASTOUPENI = PRODUKCE.ID_PRODUKCE
      LEFT JOIN OSOBA ON ZASTOUPENI.OSOBA_ID_OSOBA = OSOBA.ID_OSOBA
) GROUP BY nazev, vydani, delka, cena;
