require 'set'

FIRST_ARMSTRONG_NUMBERS = [1, 2, 3, 4, 5, 6, 7, 8, 9, 153, 370, 371, 407, 1634,
   8208, 9474, 54748, 92727, 93084, 548834, 1741725, 4210818, 9800817, 9926315,
   24678050, 24678051, 88593477, 146511208, 472335975, 534494836, 912985153,
   4679307774, 32164049650, 32164049651].to_set
     #=> #<Set: {1, 2, 3, 4, 5, 6, 7, 8, 9, 153, 370, 371, 407, 1634, 8208,
     #           9474, 54748, 92727, 93084, 548834, 1741725, 4210818,
     #           9800817, 9926315, 24678050, 24678051, 88593477, 146511208,
     #           472335975, 534494836, 912985153, 4679307774, 32164049650,
     #           32164049651}>
MAX_FIRST_ARMSTRONG_NUMBERS = FIRST_ARMSTRONG_NUMBERS.max
  #=> 32164049651

def count_armstrong_numbers(arr)
  arr.count do |n|
    if n <= MAX_FIRST_ARMSTRONG_NUMBERS
      FIRST_ARMSTRONG_NUMBERS.include?(n)
    else
      n.digits.sum { |d| d**3 } == n
    end
  end
end
