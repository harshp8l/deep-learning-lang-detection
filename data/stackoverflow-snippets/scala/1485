<profile>
  <id>acceptance-tests</id>
  <activation>
    <property>
      <name>env.BUILD_STAGE</name>
      <value>ACCEPTANCE</value>
    </property>
  </activation>
  <build>
    <plugins>
      <!-- skip unit tests -->
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-surefire-plugin</artifactId>
        <configuration>
          <skipTests>true</skipTests>
        </configuration>
      </plugin>

      <!-- run acceptance tests (during integration-test phase) -->
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-failsafe-plugin</artifactId>
        <executions>
          <execution>
            <goals>
              <goal>integration-test</goal>
              <goal>verify</goal>
            </goals>
          </execution>
        </executions>
        <configuration>
          <includes>
            <include>**/*AT*.*</include>
          </includes>
          <excludes>
            <exclude>**/*Test.*</exclude>
            <exclude>**/*IT.*</exclude>
          </excludes>
        </configuration>
      </plugin>
    </plugins>
  </build>
</profile>
