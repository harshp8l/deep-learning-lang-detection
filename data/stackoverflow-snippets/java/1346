<plugin>
    <groupId>io.fabric8</groupId>
    <artifactId>docker-maven-plugin</artifactId>
    <version>0.25.1</version>
    <extensions>true</extensions>
    <configuration>
        <dockerHost>http://10.10.121.137:2376</dockerHost>
        <images>
            <image>
                <alias>docker-mvn-test</alias>
                <name>mysql:5.7</name>
                <run>
                    <wait>
                        <tcp>
                            <host>10.10.121.137</host>
                            <ports>
                                <port>3306</port>
                            </ports>
                        </tcp>
                        <time>20000</time>
                    </wait>
                    <env>
                        <MYSQL_ROOT_PASSWORD>abc123</MYSQL_ROOT_PASSWORD>
                        <MYSQL_DATABASE>testdb</MYSQL_DATABASE>
                        <MYSQL_USER>mysql</MYSQL_USER>
                        <MYSQL_PASSWORD>mysql</MYSQL_PASSWORD>
                        <MYSQL_ROOT_PASSWORD>123456</MYSQL_ROOT_PASSWORD>
                    </env>
                    <ports>
                        <port>3306:3306</port>
                    </ports>
                </run>
            </image>
        </images>
    </configuration>
    <executions>
        <execution>
            <id>start</id>
            <phase>pre-integration-test</phase>
            <goals>
                <goal>build</goal>
                <goal>start</goal>
            </goals>
        </execution>
        <execution>
            <id>stop</id>
            <phase>post-integration-test</phase>
            <goals>
                <goal>stop</goal>
            </goals>
        </execution>
    </executions>
</plugin>
